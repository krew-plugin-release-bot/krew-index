apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: gadget
spec:
  version: v0.11.0-rc
  homepage: https://github.com/inspektor-gadget/inspektor-gadget
  shortDescription: Gadgets for debugging and introspecting apps
  description: |
    Inspektor Gadget is a collection of tools (or gadgets) to debug and inspect
    Kubernetes resources and applications. It manages the packaging, deployment
    and execution of eBPF programs in a Kubernetes cluster, including many based
    on BCC tools, as well as some developed specifically for use in Inspektor
    Gadget. It automatically maps low-level kernel primitives to high-level
    Kubernetes resources, making it easier and quicker to find the relevant
    information.

    Inspektor Gadget is deployed to each node as a privileged DaemonSet.
    It uses in-kernel eBPF helper programs to monitor events mainly related to
    syscalls from userspace programs in a pod. The eBPF programs are run by
    the kernel and gather the log data. Inspektor Gadget's userspace utilities
    fetch the log data from ring buffers and display it. What eBPF programs are
    and how Inspektor Gadget uses them is briefly explained in the architecture
    document:
    https://github.com/inspektor-gadget/inspektor-gadget/blob/main/docs/architecture.md
  caveats: |
    Inspektor Gadget needs to be deployed to each node:

    $ kubectl gadget deploy

    Read the documentation available at https://github.com/inspektor-gadget/inspektor-gadget
    to get more information about the server side installation process.
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/inspektor-gadget/inspektor-gadget/releases/download/v0.11.0-rc/kubectl-gadget-linux-amd64-v0.11.0-rc.tar.gz
    sha256: 3fb3616663fed2fd6652388f0ece09b7a73f1523060e2c5d39d8d5f96b2c6781
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/inspektor-gadget/inspektor-gadget/releases/download/v0.11.0-rc/kubectl-gadget-linux-arm64-v0.11.0-rc.tar.gz
    sha256: 3d165437de2dd6a108fbfc84854c3dd86ec1c8543d5b1526984b47819f726b08
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/inspektor-gadget/inspektor-gadget/releases/download/v0.11.0-rc/kubectl-gadget-darwin-amd64-v0.11.0-rc.tar.gz
    sha256: 0716deb690e2267d226c3cf1cce2767032e2f3ebadab3a6714e29b27efb0e9f9
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/inspektor-gadget/inspektor-gadget/releases/download/v0.11.0-rc/kubectl-gadget-darwin-arm64-v0.11.0-rc.tar.gz
    sha256: a93bc6e259bf73ae972550d4f2a6ed61e0061aa6ce72f701e7974ab154ba1b01
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/inspektor-gadget/inspektor-gadget/releases/download/v0.11.0-rc/kubectl-gadget-windows-amd64-v0.11.0-rc.tar.gz
    sha256: d030739c6002619c12402a2d62a688277c802e1612d14d1abc06f8f9d0c666e1
    bin: kubectl-gadget
