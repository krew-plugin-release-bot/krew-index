apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: gadget
spec:
  version: v0.3.0-rc3
  homepage: https://github.com/kinvolk/inspektor-gadget
  shortDescription: Gadgets for debugging and introspecting apps
  description: |
    Inspektor Gadget is a collection of tools (or gadgets) for developers of
    Kubernetes applications.

    Inspektor Gadget is deployed to each node as a privileged DaemonSet.
    It uses in-kernel BPF helper programs to monitor events mainly related to
    syscalls from userspace programs in a pod. The BPF programs are run by
    the kernel and gather the log data. Inspektor Gadget's userspace utilities
    fetch the log data from ring buffers and display it. What BPF programs are
    and how Inspektor Gadget uses them is briefly explained in the architecture
    document:
    https://github.com/kinvolk/inspektor-gadget/blob/main/Documentation/architecture.md
  caveats: |
    Inspektor Gadget needs to be deployed to each node:

    $ kubectl gadget deploy | kubectl apply -f -

    Read the documentation available at https://github.com/kinvolk/inspektor-gadget
    to get more information about the server side installation process.
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/alban/inspektor-gadget/releases/download/v0.3.0-rc3/inspektor-gadget-linux-amd64.tar.gz
    sha256: ce4734777659ae1e3f14329f8d9a5bb8fea01e4322119756544418ce97ad047c
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/alban/inspektor-gadget/releases/download/v0.3.0-rc3/inspektor-gadget-linux-arm64.tar.gz
    sha256: 8301679330a4dbb57fc7e4c9ce2ddfce707e9bbc7be9d37282f289ca1b107c9e
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/alban/inspektor-gadget/releases/download/v0.3.0-rc3/inspektor-gadget-darwin-amd64.tar.gz
    sha256: eb368fb34d5a9c7c4f634682d318e847ae301ba08a3b2a769fac3a44e00f4439
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/alban/inspektor-gadget/releases/download/v0.3.0-rc3/inspektor-gadget-darwin-arm64.tar.gz
    sha256: dcccc9349987976855ad93d10fcd8294579ad10a9d4a629cbfa6f6f235e1470b
    bin: kubectl-gadget

  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/alban/inspektor-gadget/releases/download/v0.3.0-rc3/inspektor-gadget-windows-amd64.tar.gz
    sha256: 9b9368d4490d1da54def777b54e2ca4ab487b9b69435ff4e50a6fb4f1e265e55
    bin: kubectl-gadget
