apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: preflight
spec:
  version: v0.102.0
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.102.0/preflight_linux_amd64.tar.gz
    sha256: 095e6363d877ad15597b00371ec38e944644bc1aaf3f84b759cdd7ced9db6b75
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.102.0/preflight_linux_arm64.tar.gz
    sha256: 9b2904a3e011fb2f7e55a8503e2289d10078098b48bacd3dd8077bc686bdf366
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: linux
        arch: arm
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.102.0/preflight_linux_arm.tar.gz
    sha256: 6cb3c22ec307b81acd261eb284e3e9ab7a4c141b3a2501ccf4129890113e2cc7
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.102.0/preflight_darwin_amd64.tar.gz
    sha256: 49b0034ecd95552484c0ad844a3583396398e1aa82b3478199e0fcaedefa897f
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.102.0/preflight_darwin_arm64.tar.gz
    sha256: 52beb5e682395c69189d8b5b4b706832e61b09657a7245e4abbbab4dec37d6ce
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.102.0/preflight_windows_amd64.zip
    sha256: 59e19d532bde806da05968730743cb2663cae81c3a4544d5ff38323efa8b9be0
    files:
    - from: preflight.exe
      to: .
    - from: LICENSE
      to: .
    bin: preflight.exe
  shortDescription: Executes application preflight tests in a cluster
  homepage: https://github.com/replicatedhq/troubleshoot
  description: |
    This plugin executes application-specific preflight checks and conformance
    tests against a cluster, prior to installation of an application.

    Application developers can create and host a Preflight manifest that
    defines the minimum and desired Kubernetes environment for an application.
    Before installing the application, a cluster admin can use this plugin to
    execute the application preflight checksto identify any missing
    components, configuration or incompatibilities between the cluster and the
    desired environment.

    When executing Preflight tests, the test results will be displayed in a
    terminal-based UI on the workstation that executed the command.

    For information on creating a Preflight manifest, view the documentation
    at https://help.replicated.com/docs/troubleshoot/kubernetes/analysis/

    Usage:
      $ kubectl preflight <uri/path>

      where <uri/path> references a set of application preflight checks

      For example:

      $ kubectl preflight https://preflight.replicated.com

    For additional options:
      $ kubectl preflight --help

    Documentation:
      Full documentation on this plugin is available at:
      https://help.replicated.com/docs/troubleshoot/kubernetes/preflight/overview/

      For application developers writing collectors and analyzers:
      https://help.replicated.com/docs/troubleshoot/kubernetes/collectors/defining-collectors/
