apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: preflight
spec:
  version: v0.91.0
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.91.0/preflight_linux_amd64.tar.gz
    sha256: 63bc3968e75264c4fe155803b31aac84bb1ff70f0aaa731a4254e33193cae431
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.91.0/preflight_linux_arm64.tar.gz
    sha256: 8c594119915352a0fc11f2a318c27e7bab94f2c5e18163df90b9ca7edc428548
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: linux
        arch: arm
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.91.0/preflight_linux_arm.tar.gz
    sha256: cab6b287c530a52440de5a92aaec382d4061e596dd7fbd9ccf3ac0f1220b4cd3
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.91.0/preflight_darwin_amd64.tar.gz
    sha256: b653488912a80671ad4027e6170c846aaa253f3b440ac763cbb67c31570571af
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.91.0/preflight_darwin_arm64.tar.gz
    sha256: 68b160080a93fec625b213de941969ab0b8d0666995a09af2a1dadb82d1e2f63
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.91.0/preflight_windows_amd64.zip
    sha256: 92ccb8f477bbe746fc1d98b815e8d97824558b721e7b82dd2f6fe1aff5a192ad
    files:
    - from: preflight.exe
      to: .
    - from: LICENSE
      to: .
    bin: preflight.exe
  shortDescription: Executes application preflight tests in a cluster
  homepage: https://github.com/replicatedhq/troubleshoot
  description: |
    This plugin executes application-specific preflight checks and conformance
    tests against a cluster, prior to installation of an application.

    Application developers can create and host a Preflight manifest that
    defines the minimum and desired Kubernetes environment for an application.
    Before installing the application, a cluster admin can use this plugin to
    execute the application preflight checksto identify any missing
    components, configuration or incompatibilities between the cluster and the
    desired environment.

    When executing Preflight tests, the test results will be displayed in a
    terminal-based UI on the workstation that executed the command.

    For information on creating a Preflight manifest, view the documentation
    at https://help.replicated.com/docs/troubleshoot/kubernetes/analysis/

    Usage:
      $ kubectl preflight <uri/path>

      where <uri/path> references a set of application preflight checks

      For example:

      $ kubectl preflight https://preflight.replicated.com

    For additional options:
      $ kubectl preflight --help

    Documentation:
      Full documentation on this plugin is available at:
      https://help.replicated.com/docs/troubleshoot/kubernetes/preflight/overview/

      For application developers writing collectors and analyzers:
      https://help.replicated.com/docs/troubleshoot/kubernetes/collectors/defining-collectors/
