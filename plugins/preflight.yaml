apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: preflight
spec:
  version: v0.61.0
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.61.0/preflight_linux_amd64.tar.gz
    sha256: 070c4d400eeb12bf345d569d04477a4deb99225c8c075f558380f104b2575d12
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.61.0/preflight_linux_arm64.tar.gz
    sha256: 8b3c9bcfaa59c4a9194e48303bd9b6e6ece3ef09d2110aba85dd489f51ed19c4
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: linux
        arch: arm
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.61.0/preflight_linux_arm.tar.gz
    sha256: a8296f51224e71f4f3871c184c59cbad8e4c293e4411421fdd485150f95fdaf1
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.61.0/preflight_darwin_amd64.tar.gz
    sha256: 92a02073b4c620f9629b261b27fd366de15550aea834339d2670408af825dc08
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.61.0/preflight_darwin_arm64.tar.gz
    sha256: 2e8ca34319c0e91f85cfc74a166cb0be93c43afde592f5ca4bcb3b45cac7d2b5
    files:
    - from: preflight
      to: .
    - from: LICENSE
      to: .
    bin: preflight
  - selector:
      matchLabels:
        os: windows
        arch: amd64
    uri: https://github.com/replicatedhq/troubleshoot/releases/download/v0.61.0/preflight_windows_amd64.zip
    sha256: 711118eca94dcf8f4ae18907090e663f55640b1d1ee3259b28eb52ab0a9552d8
    files:
    - from: preflight.exe
      to: .
    - from: LICENSE
      to: .
    bin: preflight.exe
  shortDescription: Executes application preflight tests in a cluster
  homepage: https://github.com/replicatedhq/troubleshoot
  description: |
    This plugin executes application-specific preflight checks and conformance
    tests against a cluster, prior to installation of an application.

    Application developers can create and host a Preflight manifest that
    defines the minimum and desired Kubernetes environment for an application.
    Before installing the application, a cluster admin can use this plugin to
    execute the application preflight checksto identify any missing
    components, configuration or incompatibilities between the cluster and the
    desired environment.

    When executing Preflight tests, the test results will be displayed in a
    terminal-based UI on the workstation that executed the command.

    For information on creating a Preflight manifest, view the documentation
    at https://help.replicated.com/docs/troubleshoot/kubernetes/analysis/

    Usage:
      $ kubectl preflight <uri/path>

      where <uri/path> references a set of application preflight checks

      For example:

      $ kubectl preflight https://preflight.replicated.com

    For additional options:
      $ kubectl preflight --help

    Documentation:
      Full documentation on this plugin is available at:
      https://help.replicated.com/docs/troubleshoot/kubernetes/preflight/overview/

      For application developers writing collectors and analyzers:
      https://help.replicated.com/docs/troubleshoot/kubernetes/collectors/defining-collectors/
