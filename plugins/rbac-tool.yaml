apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: rbac-tool
spec:
  version: v1.14.2
  platforms:
  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.14.2/rbac-tool_v1.14.2_linux_amd64.tar.gz
    sha256: a472d6504796d24d6aacb19395505919c37d094b5816b3fc1c0829eccc52b076
    selector:
      matchLabels:
        os: linux
        arch: amd64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.14.2/rbac-tool_v1.14.2_linux_arm64.tar.gz
    sha256: acd0d1d9d58cdeb595d099d84f5cb3ce41edc83bd3717f9770ff5d5df9a4d754
    selector:
      matchLabels:
        os: linux
        arch: arm64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.14.2/rbac-tool_v1.14.2_darwin_amd64.tar.gz
    sha256: 7d8e4b7741b27545918f718fb383204fef907da2ab322fa1a7c46c84a21c0874
    selector:
      matchLabels:
        os: darwin
        arch: amd64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.14.2/rbac-tool_v1.14.2_darwin_arm64.tar.gz
    sha256: 4d0c5f1c5420a8de3db46378c08bccccfa7dd263854abdec9f1f96aee01422ed
    selector:
      matchLabels:
        os: darwin
        arch: arm64

  - bin: rbac-tool.exe
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.14.2/rbac-tool_v1.14.2_windows_amd64.tar.gz
    sha256: b5f4a470aefcd7b24d66cab4f14832847c897a0f883da9b13c485d0b8e6e1f76
    selector:
      matchLabels:
        os: windows
        arch: amd64

  shortDescription: Plugin to analyze RBAC permissions and generate policies
  homepage: https://github.com/alcideio/rbac-tool
  description: |
    This plugin is a collection of RBAC tools to simplify analysis and configuration.
    You can visualize, analyze, query permissions as well as generate policies in multiple ways.

    Examples:
    # Generate HTML visualzation of your RBAC permissions
    kubectl rbac-tool viz

    # Query who can read secrets
    kubectl rbac-tool who-can get secret

    # Generate a ClusterRole policy that allows to read everything except secrets and services
    kubectl rbac-tool gen --deny-resources=secrets.,services. --allowed-verbs=get,list