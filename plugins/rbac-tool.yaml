apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: rbac-tool
spec:
  version: v1.10.0
  platforms:
  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.10.0/rbac-tool_v1.10.0_linux_amd64.tar.gz
    sha256: e4ddbfbf4d5048a6352a8f834197c1fd2e8afac8a46f7bbffa624eeb8ede792f
    selector:
      matchLabels:
        os: linux
        arch: amd64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.10.0/rbac-tool_v1.10.0_linux_arm64.tar.gz
    sha256: bb18c737b76fc1822cdf99526fd03acf584051ab1b47dc8f9d3a7a2b67be8aaa
    selector:
      matchLabels:
        os: linux
        arch: arm64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.10.0/rbac-tool_v1.10.0_darwin_amd64.tar.gz
    sha256: 292e599469e39162667c24a9ed654f1ecd05c8965196ee9ba2a744f26e6c6a65
    selector:
      matchLabels:
        os: darwin
        arch: amd64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.10.0/rbac-tool_v1.10.0_darwin_arm64.tar.gz
    sha256: 53e2f9835f0d9dcfc4f3f6023873a10fe816b4c8fa28e355f5bec77043d53190
    selector:
      matchLabels:
        os: darwin
        arch: arm64

  - bin: rbac-tool.exe
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.10.0/rbac-tool_v1.10.0_windows_amd64.tar.gz
    sha256: 70bc65ac903763118be4f454ea60678872510a435d38372e9a89c3db0169992c
    selector:
      matchLabels:
        os: windows
        arch: amd64

  shortDescription: Plugin to analyze RBAC permissions and generate policies
  homepage: https://github.com/alcideio/rbac-tool
  description: |
    This plugin is a collection of RBAC tools to simplify analysis and configuration.
    You can visualize, analyze, query permissions as well as generate policies in multiple ways.

    Examples:
    # Generate HTML visualzation of your RBAC permissions
    kubectl rbac-tool viz

    # Query who can read secrets
    kubectl rbac-tool who-can get secret

    # Generate a ClusterRole policy that allows to read everything except secrets and services
    kubectl rbac-tool gen --deny-resources=secrets.,services. --allowed-verbs=get,list