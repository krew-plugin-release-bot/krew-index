apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: rbac-tool
spec:
  version: v1.4.0
  platforms:
  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.4.0/rbac-tool_v1.4.0_linux_amd64.tar.gz
    sha256: db7c05c9f8f440cd98620c462618aa3f20576d05b159b09ec59568c1cf7a1a33
    selector:
      matchLabels:
        os: linux
        arch: amd64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.4.0/rbac-tool_v1.4.0_linux_arm64.tar.gz
    sha256: cba4bd840afa845929da855cf9345e9a0c0632647981f39254f0ff5b5a7411bc
    selector:
      matchLabels:
        os: linux
        arch: arm64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.4.0/rbac-tool_v1.4.0_darwin_amd64.tar.gz
    sha256: 95bf1f747c4b1d873eaac5e385899ddc0aad301c74154c24d09d8381e3bf557d
    selector:
      matchLabels:
        os: darwin
        arch: amd64

  - bin: rbac-tool
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.4.0/rbac-tool_v1.4.0_darwin_arm64.tar.gz
    sha256: 0c575513dfc57699bd3b30685c97d9f8fec7b33f72420af0c75b2eee198bd451
    selector:
      matchLabels:
        os: darwin
        arch: arm64

  - bin: rbac-tool.exe
    uri: https://github.com/alcideio/rbac-tool/releases/download/v1.4.0/rbac-tool_v1.4.0_windows_amd64.tar.gz
    sha256: 799e84eae3e5f30b85b8462f8b888fa9ed0b0f64429560f689c2b3d8e6960a38
    selector:
      matchLabels:
        os: windows
        arch: amd64

  shortDescription: Plugin to analyze RBAC permissions and generate policies
  homepage: https://github.com/alcideio/rbac-tool
  description: |
    This plugin is a collection of RBAC tools to simplify analysis and configuration.
    You can visualize, analyze, query permissions as well as generate policies in multiple ways.

    Examples:
    # Generate HTML visualzation of your RBAC permissions
    kubectl rbac-tool viz

    # Query who can read secrets
    kubectl rbac-tool who-can get secret

    # Generate a ClusterRole policy that allows to read everything except secrets and services
    kubectl rbac-tool gen --deny-resources=secrets.,services. --allowed-verbs=get,list