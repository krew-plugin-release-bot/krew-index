apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.30.0
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.30.0/kubelogin_linux_amd64.zip
    sha256: 3e61379ff750e7e74b64807a8003b755c9733b919a9cae0f22634bd19589b636
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.30.0/kubelogin_linux_arm64.zip
    sha256: b741f4cd5b4c5da7f27ffe83ac33e5e2ecf7a7553d6e7d704264822be392baae
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.30.0/kubelogin_linux_arm.zip
    sha256: 4fadffb70d211d655475fb65913d6d3475196de50e7c467cbcef6f04844b93ae
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.30.0/kubelogin_darwin_amd64.zip
    sha256: e63f0bd1d9c193b2f7efb6419fd7528b7f23f802247e5872ace3440706f0e530
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.30.0/kubelogin_darwin_arm64.zip
    sha256: 3382fce6304b656b0cbda76821c0c2f60525507c433947f78d08b22b64371489
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.30.0/kubelogin_windows_amd64.zip
    sha256: 01ba1b0c7462b3758b1fb56f71350d7ea93fe7c1e5bbfd245d3fc5bfbcabed84
    selector:
      matchLabels:
        os: windows
        arch: amd64
