apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: oidc-login
spec:
  homepage: https://github.com/int128/kubelogin
  shortDescription: Log in to the OpenID Connect provider
  description: |
    This is a kubectl plugin for Kubernetes OpenID Connect (OIDC) authentication.

    ## Credential plugin mode
    kubectl executes oidc-login before calling the Kubernetes APIs.
    oidc-login automatically opens the browser and you can log in to the provider.
    After authentication, kubectl gets the token from oidc-login and you can access the cluster.
    See https://github.com/int128/kubelogin#credential-plugin-mode for more.

    ## Standalone mode
    Run `kubectl oidc-login`.
    It automatically opens the browser and you can log in to the provider.
    After authentication, it writes the token to the kubeconfig and you can access the cluster.
    See https://github.com/int128/kubelogin#standalone-mode for more.

  caveats: |
    You need to setup the OIDC provider, Kubernetes API server, role binding and kubeconfig.
  version: v1.32.0
  platforms:
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_linux_amd64.zip
    sha256: 84dd9328962ad96bcb37f02391e74351c2b388df5f3eefbbf2385c87e5fecbc5
    selector:
      matchLabels:
        os: linux
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_linux_arm64.zip
    sha256: 5700c9dd73e738f57599f4d9e9fe8f18f64d4884467dfe15cc1f0e3c48050596
    selector:
      matchLabels:
        os: linux
        arch: arm64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_linux_arm.zip
    sha256: 545d01f645d1dca9d5125849225c28e03b5214c4e79a104fdb7a10fb002a93f6
    selector:
      matchLabels:
        os: linux
        arch: arm
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_darwin_amd64.zip
    sha256: ffeab2f789d81147ccf94eac4bf7d79238e7c85fa072b0e0036325db7548ff99
    selector:
      matchLabels:
        os: darwin
        arch: amd64
  - bin: kubelogin
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_darwin_arm64.zip
    sha256: d18f9ba635cd7fb294df2835d772daeec36dacb780e19d1da9b45b8fc7a325a1
    selector:
      matchLabels:
        os: darwin
        arch: arm64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_windows_amd64.zip
    sha256: fefa89ec8416994d7bf04789bc7721e009cf5b3f166624b542e39e3cd6aa00c0
    selector:
      matchLabels:
        os: windows
        arch: amd64
  - bin: kubelogin.exe
    uri: https://github.com/int128/kubelogin/releases/download/v1.32.0/kubelogin_windows_arm64.zip
    sha256: 8933606d691787076bfad342d8a53953eec6fd0b8612c068790a00294db0a053
    selector:
      matchLabels:
        os: windows
        arch: arm64