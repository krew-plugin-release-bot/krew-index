apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: nsenter
spec:
  version: v0.2.2
  homepage: https://github.com/pabateman/kubectl-nsenter
  shortDescription: "Run shell command in Pod's namespace on the node over SSH connection"
  description: |
    This plugin establishes a connection to node that's running the Pod over SSH and uses
    nsenter to run commands in the container's namespace. You would need something
    like this to run programs that are missing in the container image but presents on node.
  caveats: |
    * This plugin needs SSH access to nodes
    * Remote user must have root access
    * Nodes need to have 'nsenter'
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v0.2.2/kubectl-nsenter-linux-amd64.tar.gz
    sha256: 766fa1c1556be4528bf99884e87ca01fc16d87e1dc9f0b9f79e7c88d4874ab69
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-linux-amd64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v0.2.2/kubectl-nsenter-darwin-amd64.tar.gz
    sha256: 5742d2639afdd780052431b94fdcea3bfe73d1d8ceb6e5144a7369cbb562eefe
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-darwin-amd64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v0.2.2/kubectl-nsenter-darwin-arm64.tar.gz
    sha256: c8bbfe6756f698826a2f6af6e4a96304b83b2ca1466ae1c3004b3a66e1087272
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-darwin-arm64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
