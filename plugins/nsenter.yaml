apiVersion: krew.googlecontainertools.github.com/v1alpha2
kind: Plugin
metadata:
  name: nsenter
spec:
  version: v1.1.4
  homepage: https://github.com/pabateman/kubectl-nsenter
  shortDescription: "Run shell command in Pod's namespace on the node over SSH connection"
  description: |
    This plugin establishes a connection to node that's running the Pod over SSH and uses
    nsenter to run commands in the container's namespace. You would need something
    like this to run programs that are missing in the container image but presents on node.
  caveats: |
    * This plugin needs SSH access to nodes
    * Remote user must have root access
    * Nodes need to have 'nsenter'
  platforms:
  - selector:
      matchLabels:
        os: linux
        arch: amd64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v1.1.4/kubectl-nsenter-linux-amd64.tar.gz
    sha256: d1efce762b09f9b75a35c5ed2cc9d53da0d9d1f0b31763bcbe084b154df5ad8d
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-linux-amd64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
  - selector:
      matchLabels:
        os: linux
        arch: arm64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v1.1.4/kubectl-nsenter-linux-arm64.tar.gz
    sha256: a438b909c9c0591c8135093883f3310b3d4193bd47e03551024ff010f7949a32
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-linux-arm64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
  - selector:
      matchLabels:
        os: darwin
        arch: amd64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v1.1.4/kubectl-nsenter-darwin-amd64.tar.gz
    sha256: ab2c0fd96e97acc31ac65c0c1a38d21dc3f6f1db461dbfe0e580655dcada8384
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-darwin-amd64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
  - selector:
      matchLabels:
        os: darwin
        arch: arm64
    uri: https://github.com/pabateman/kubectl-nsenter/releases/download/v1.1.4/kubectl-nsenter-darwin-arm64.tar.gz
    sha256: e51a92add74b21c336878afb62e4597f325a43ac83e0b7d05468477285fefde3
    bin: kubectl-nsenter
    files:
      - from: kubectl-nsenter-darwin-arm64
        to: kubectl-nsenter
      - from: LICENSE
        to: .
